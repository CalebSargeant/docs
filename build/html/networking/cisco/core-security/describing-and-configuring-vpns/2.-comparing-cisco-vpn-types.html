<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Comparing Cisco VPN Types &mdash; Caleb Sargeant&#39;s Docs 1.0.1 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Configuring DMVPN" href="3.-configuring-dmvpn.html" />
    <link rel="prev" title="Comparing Cryptography Components" href="1.-comparing-cryptography-components.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html" class="icon icon-home"> Caleb Sargeant's Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Networking</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Cisco</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Core Security</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../security-concepts/index.html">Security Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network-security-fundamentals/index.html">Network Security Fundamentals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentals-from-the-book/index.html">Fundamentals from the Book</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network-security-with-cisco-ios/index.html">Network Security with Cisco IOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network-security-with-cisco-asa/index.html">Network Security with Cisco ASA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network-security-with-cisco-firepower/index.html">Network Security with Cisco Firepower</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Describing and Configuring VPNs</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="1.-comparing-cryptography-components.html">Comparing Cryptography Components</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Comparing Cisco VPN Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="3.-configuring-dmvpn.html">Configuring DMVPN</a></li>
<li class="toctree-l4"><a class="reference internal" href="4.-configuring-flexvpn.html">Configuring FlexVPN</a></li>
<li class="toctree-l4"><a class="reference internal" href="5.-configuring-cisco-anyconnect-on-the-asa.html">Configuring Cisco AnyConnect on the ASA</a></li>
<li class="toctree-l4"><a class="reference internal" href="6.-configuring-cisco-anyconnect-on-the-ftd.html">Configuring Cisco AnyConnect on the FTD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../secure-network-access-visibility-and-enforcement/index.html">Secure Network Access, Visibility, and Enforcement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../secure-network-access-using-cisco-ise/index.html">Secure Network Access Using Cisco ISE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../endpoint-protection-and-detection-with-cisco-amp/index.html">Endpoint Protection and Detection with Cisco AMP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../content-security-with-cisco-wsa-and-cisco-umbrella/index.html">Content Security with Cisco WSA &amp; Cisco Umbrella</a></li>
<li class="toctree-l3"><a class="reference internal" href="../email-security-with-cisco-esa/index.html">Email Security with Cisco ESA</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../routing/index.html">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../switching/index.html">Switching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mpls/index.html">MPLS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ngfw-ngips/index.html">NGFW &amp; NGIPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devnetday/index.html">DevNet Day</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aci.html">ACI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asa.html">ASA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asav.html">ASAv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dna.html">DNA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general.html">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../genie.html">Genie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ise.html">ISE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nexus.html">Nexus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nso.html">NSO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../virl.html">VIRL</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../fortigate.html">FortiGate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hp.html">HP Procurve</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../juniper.html">Juniper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ubiquiti-unifi.html">Ubiquiti UniFi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../netdevops-toolchest.html">NetDevOps Tool Chest</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Computing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../computing/ansible/index.html">Ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../computing/bamboo.html">Bamboo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../computing/cloud/index.html">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../computing/containerisation/index.html">Containerisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../computing/jenkins/index.html">Jenkins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../computing/linux/index.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../computing/terraform/index.html">Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../computing/microsoft/index.html">Microsoft</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../programming/bash.html">Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../programming/python/index.html">Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../other/api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../other/general/index.html">General</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../other/iperf.html">iPerf3</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Caleb Sargeant's Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">Cisco</a> &raquo;</li>
          <li><a href="../index.html">Core Security</a> &raquo;</li>
          <li><a href="index.html">Describing and Configuring VPNs</a> &raquo;</li>
      <li>Comparing Cisco VPN Types</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/networking/cisco/core-security/describing-and-configuring-vpns/2.-comparing-cisco-vpn-types.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="comparing-cisco-vpn-types">
<h1>Comparing Cisco VPN Types<a class="headerlink" href="#comparing-cisco-vpn-types" title="Permalink to this headline"></a></h1>
<section id="configuring-isakmp-ike-sa-tunnels">
<h2>Configuring ISAKMP &amp; IKE SA Tunnels<a class="headerlink" href="#configuring-isakmp-ike-sa-tunnels" title="Permalink to this headline"></a></h2>
<p><strong>Configuring IPSec on Cisco IOS</strong></p>
<p><strong>Configure IKEv1</strong></p>
<ul class="simple">
<li><p>Configure Phase 1 Tunnel</p>
<ul>
<li><p>Configure ISAKMP Policy</p>
<ul>
<li><p>Where the HAGLE parameters are configured</p></li>
</ul>
</li>
<li><p>Configure ISAKMP PSK</p>
<ul>
<li><p>Where the PSK is configured for each VPN address</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Configuring Phase 2 Tunnel</p>
<ul>
<li><p>Configure Transform Set</p></li>
<li><p>Configure IPsec Profile</p></li>
</ul>
</li>
</ul>
<p><strong>Configure IKEv2</strong></p>
<ul class="simple">
<li><p>Configure IKE_SA Tunnel</p>
<ul>
<li><p>Configure IKEv2 Proposal</p></li>
<li><p>Configure IKEv2 Profile</p></li>
<li><p>Configure IKEv2 Policy</p></li>
<li><p>Configure Keyring</p></li>
</ul>
</li>
<li><p>Configure Child SA Tunnel</p>
<ul>
<li><p>Configure Transform Set</p></li>
<li><p>Configure IPsec Profile</p></li>
</ul>
</li>
</ul>
<section id="ikev1-phase-1-configuration-tasks">
<h3>IKEv1 Phase 1 Configuration Tasks<a class="headerlink" href="#ikev1-phase-1-configuration-tasks" title="Permalink to this headline"></a></h3>
<p><strong>Configure ISAKMP Policy</strong></p>
<ul class="simple">
<li><p>The lower the number, the higher the priority</p></li>
<li><p>Configure each HAGLE parameter by entering the attribute that you
want to configure, followed by the chosen configuration</p></li>
<li><p>It is best practice to have the most secure algorithm with the
highest priority, while the least secure algorithm will be the lowest
priority</p></li>
<li><p>The ISAKMP policy number does not need to be the same on both sides</p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(config)#crypto isakmp policy 10
(config-isakmp)#hash sha512
(config-isakmp)#authentication pre-share
(config-isakmp)#group 15
(config-isakmp)#lifetime 86400
(config-isakmp)#encryption aes 256
</pre></div>
</div>
<p><strong>Configure ISAKMP PSK</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(config)#crypto isakmp key cisco123 1.1.1.1
# OR
(config)#crypto isakmp key cisco123 hostname omaha-router.globomantics.com
</pre></div>
</div>
</section>
<section id="ikev2-ike-sa-configuration-tasks">
<h3>IKEV2 IKE_SA Configuration Tasks<a class="headerlink" href="#ikev2-ike-sa-configuration-tasks" title="Permalink to this headline"></a></h3>
<p><strong>Configure Keyring</strong></p>
<ul class="simple">
<li><p>Defines the PSKs of VPN peers are configured</p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Creates a keyring with a locally significant name
(config)#crypto ikev2 keyring name_of_keyring

# Creates a peer within the key ring that all attributes will be assigned to
(config-ikev2-keyring)#peer name_of_peer

# Specify the IP address
(config-ikev2-keyring-peer)#address ip_address

# Enter the identity mechanism the router will use to identify the peer
(config-ikev2-keyring-peer)#identity &lt;address[FQDN[email[key-id&gt; r1.test.com

# Enter both the local and remote PSK
(config-ikev2-keyring-peer)#pre-shared-key local cisco123

# Enter both the local and remote PSK
(config-ikev2-keyring-peer)#pre-shared-key remote cisco456
</pre></div>
</div>
<p><strong>Configure IKEv2 Proposal</strong></p>
<ul class="simple">
<li><p>Defines Hash, DH Group, and Encryption</p></li>
</ul>
<p><strong>Configure IKEv2 Profile</strong></p>
<ul class="simple">
<li><p>Defines Authentication, Keyring, Lifetime</p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Creates an IKEv2 profile with a locally significant name
(config)#crypto ikev2 profile name_of_profile

# Matches our peer. Can be IP address, Domain name, email, etc
(config-ikev2-profile)#match identity remote &lt;addresslemaillfqdn&gt; identifier

# Identifies how we will authenticate with the peer locally
(config-ikev2-profile)#authentication local &lt;pre-sharelrsa-sig&gt;

# Identifies how we will authenticate with the peer remotely
(config-ikev2-profile)#authentication remote &lt;pre-sharelrsa-sig&gt;

# Enter both the local and remote PSK
(config-ikev2-profile)#keyring name_of_keyring

# Specifies the lifetime
(config-ikev2-profile)#lifetime lifetime_length_in_seconds

# Determines the identity the router will send to VPN peer
(config-ikev2-profile)# identity local fqdn fully_qualified_domain_name
</pre></div>
</div>
<p><strong>Configure IKEv2 Policy</strong></p>
<ul class="simple">
<li><p>Defines router traffic to match</p></li>
<li><p>Whenever possible, use explicit policies for VPN connections</p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(config)#crypto ikev2 policy name_of_policy
(config-ikev2-profile)#match address local ip_address
(config-ikev2-profile)#match fvrf name_of_fvrf
# Specifies the IKEv2 Proposal traffic that matches this policy will use
(config-ikev2-profile)#proposal name_of_ikev2_proposal
</pre></div>
</div>
</section>
</section>
<section id="configuring-the-ipsec-tunnel">
<h2>Configuring the IPsec Tunnel<a class="headerlink" href="#configuring-the-ipsec-tunnel" title="Permalink to this headline"></a></h2>
<section id="configuring-the-2nd-tunnel-ikev1-or-ikev2">
<h3>Configuring the 2nd Tunnel (IKEv1 or IKEv2)<a class="headerlink" href="#configuring-the-2nd-tunnel-ikev1-or-ikev2" title="Permalink to this headline"></a></h3>
<p><strong>Configure Transform Set</strong></p>
<ul class="simple">
<li><p>Defines encryption and hash of second tunnel</p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Specifies the encryption and hashing algorithm
(config)#crypto ipsec transform-set name esp-aes 256 esp-sha256-hmac

# Specifies if the tunnel is in transport mode or tunnel mode
(cfg-crypto-trans)#mode &lt;tunnel[transport&gt;
</pre></div>
</div>
<p><strong>Configure IPsec Profile</strong></p>
<ul class="simple">
<li><p>Associates transform set with the first tunnel</p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(config)#crypto ipsec profile name_of_profile

# Matches transform set to the first tunnel
(ipsec-profile)#set transform-set name_of_transform_set
(ipsec-profile)#set &lt;ikev2-profile|isakmp-profile&gt; name_of_profile
</pre></div>
</div>
</section>
<section id="legacy-configuration-crypto-maps">
<h3>Legacy Configuration (Crypto-Maps)<a class="headerlink" href="#legacy-configuration-crypto-maps" title="Permalink to this headline"></a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(config)#access-list 100 permit ip 192.168.1.0 0.0.0.255 any
(config)#crypto map crypto_map_name sequence_number ipsec-isakmp
(config-crypto-map)#match address 100
(config-crypto-map)#set peer 1.1.1.1
(config-crypto-map)#set transform-set transform_set_name
(config-crypto-map)#set isakmp-profile isakmp_profile_name
(config-crypto-map)#exit
(config)#interface ethernet 0/1
(config-if)#crypto map crypto_map_name
</pre></div>
</div>
</section>
</section>
<section id="cisco-tunnel-interface-types">
<h2>Cisco Tunnel Interface Types<a class="headerlink" href="#cisco-tunnel-interface-types" title="Permalink to this headline"></a></h2>
<section id="virtual-tunnel-interface-vti">
<h3>Virtual Tunnel Interface (VTI)<a class="headerlink" href="#virtual-tunnel-interface-vti" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Allows for easier management</p>
<ul>
<li><p>Can apply policies to tunnel interface just like any other
interface</p></li>
</ul>
</li>
<li><p>Can use the IP address of another interface</p></li>
</ul>
<p><strong>VTI Configuration</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(config)#tunnel interface interface_number
(config-if)#tunnel mode ipsec &lt;ipv4lipv6&gt;
(config-if)#ip address ip_address subnet_mask OR
(config-if)#ip unnumbered interface_number
(config-if)#tunnel source &lt;ip_addresslinterface_name&gt;
(config-if)#tunnel destination ip_address_of_peer
(config-if)#tunnel protection ipsec profile name_of_profile
</pre></div>
</div>
</section>
<section id="dynamic-vti">
<h3>Dynamic VTI<a class="headerlink" href="#dynamic-vti" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Used in hub-and-spoke S2S VPNs</p></li>
<li><p>Use a template to dynamically</p></li>
<li><p>Each interface would use the config outlined in the template create
tunnel interfaces</p></li>
</ul>
<p><strong>dVTI Configuration</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(config)#interface virtual-template template_number type tunnel
(config-if)#tunnel mode ipsec &lt;ipv4lipv6&gt;
(config-if)#ip address ip_address subnet_mask
(config-if)#tunnel source &lt;ip_addresslinterface_name&gt;
(config-if)#tunnel protection ipsec profile name_of_profile
(config-if)#exit
(config)#crypto ikev2 profile name_of_profile
(config-ikev2-profile)#virtual-template template_number
</pre></div>
</div>
</section>
<section id="gre-tunnel">
<h3>GRE Tunnel<a class="headerlink" href="#gre-tunnel" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Generic Routing Encapsulation</p></li>
<li><p>Not encrypted</p></li>
<li><p>Allows unicast, multicast, broadcast and non-IP traffic</p></li>
<li><p>Needs its own IP address, source interface, and destination IP
address</p></li>
</ul>
<p><strong>GRE Tunnel Configuration</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(config)#tunnel interface interface_number
(config-if)#tunnel mode gre &lt;iplipv6&gt;
(config-if)#ip address ip_address subnet_mask
(config-if)#tunnel source &lt;ip_addresslinterface_name&gt;
(config-if)#tunnel destination ip_address_of_peer
(config-if)#tunnel protection ipsec profile name_of_profile
</pre></div>
</div>
</section>
<section id="mtu-size-and-mss-size">
<h3>MTU Size and MSS Size<a class="headerlink" href="#mtu-size-and-mss-size" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Ethernet MTU is 1500</p>
<ul>
<li><p>Any packet that is 1500 will need to be fragmented after IPsec
headers are added</p></li>
<li><p>That will not work as the IPsec trailers would not be included</p></li>
</ul>
</li>
<li><p>Smaller MTU on the interface</p>
<ul>
<li><p>Packets will be fragmented before IPsec is applied</p></li>
</ul>
</li>
<li><p>MSS value</p>
<ul>
<li><p>40 less for IPv4</p></li>
</ul>
</li>
</ul>
<p><strong>MTU Size and MSS Size Configuration</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(config-if)#ip mtu 1400
(config-if)#ip tcp adjust-mss 1360
</pre></div>
</div>
</section>
<section id="gre-multipoint-interface">
<h3>GRE Multipoint Interface<a class="headerlink" href="#gre-multipoint-interface" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Allows tunnel interface to create Multiple VPNs with multiple devices</p></li>
<li><p>Used with DMVPN</p></li>
</ul>
<p><strong>GRE Multipoint Interface Configuration</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>### (config-if)#tunnel destination ip_address_of_peer - is not configured
(config)#tunnel interface interface_number
(config-if)#tunnel mode gre multipoint (ipv6)
(config-if)#ip address ip_address subnet_mask
(config-if)#tunnel source &lt;ip_addresslinterface_name&gt;
(config-if)#tunnel protection ipsec profile name_of_profile
(config-if)#ip mtu 1400
(config-if)#ip tcp adjust-mss 1360
</pre></div>
</div>
</section>
</section>
<section id="dmvpn">
<h2>DMVPN<a class="headerlink" href="#dmvpn" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>DMVPN doesn’t require each spoke to have a static NBMA</p></li>
<li><p>NHRP network IDs</p></li>
<li><p>DMVPN uses GRE interfaces, IPsec still needs to be applied</p></li>
<li><p>Configure additional security</p>
<ul>
<li><p>Tunnel keys</p></li>
<li><p>NHRP authentication</p></li>
</ul>
</li>
</ul>
<section id="dmvpn-components">
<h3>DMVPN Components<a class="headerlink" href="#dmvpn-components" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Non-Broadcast Multiple Access (NBMA) Address</p>
<ul>
<li><p>IP address routers use to establish VPN</p></li>
</ul>
</li>
<li><p>Next Hop Resolution Protocol (NHRP)</p>
<ul>
<li><p>Maps the NBMA to each tunnel interface</p></li>
</ul>
</li>
<li><p>Next Hop Server (NHS)</p>
<ul>
<li><p>Main device that has the NBMA’s for all of the routers</p></li>
</ul>
</li>
</ul>
<p><strong>DMVPN in Words</strong></p>
<ul class="simple">
<li><p>R1 uses dynamic routing protocol to get to R2 via HQ</p></li>
<li><p>R1 tunnel interface is configured as MGRE and configured with NHRP</p></li>
<li><p>As soon as first packet is sent, R1 will make NHRP request to
next-hop server</p></li>
<li><p>R1 asks HQ how to get to R2</p></li>
<li><p>HQ sends NHRP to R2, R2 sends NBMA address to R1</p></li>
<li><p>R1 establishes its own tunnel to R2</p></li>
</ul>
</section>
<section id="dmvpn-phases">
<h3>DMVPN Phases<a class="headerlink" href="#dmvpn-phases" title="Permalink to this headline"></a></h3>
<p>Hub will always forward NHRP request, even if it knows the NBMA that the
request initiator is trying to find.</p>
<ul class="simple">
<li><p>Phase 1</p>
<ul>
<li><p>Requires all traffic to go through the hub</p></li>
<li><p>Benefit: Allows dynamic tunnels</p></li>
</ul>
</li>
<li><p>Phase 2</p>
<ul>
<li><p>Allows spoke-to-spoke tunnels</p></li>
</ul>
</li>
<li><p>Phase 3</p>
<ul>
<li><p>Hub can enforce optimal path</p></li>
<li><p>Hierarchical design of DMVPN</p></li>
<li><p>Better route summaries</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="flexvpn">
<h2>FlexVPN<a class="headerlink" href="#flexvpn" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Framework that encompasses different VPN deployments</p></li>
<li><p>Hub router has different templates for each VPN type</p></li>
<li><p>Virtual templates contains the necessary configurations</p></li>
<li><p>Once authentication is matched, corresponding virtual template is
used</p></li>
<li><p>Can send configurations through the VPN tunnel</p></li>
<li><p>High availability (secondary hubs, etc.)</p></li>
<li><p>FlexVPN requires IKEv2 to be used.</p></li>
</ul>
<p><strong>Authorization</strong></p>
<ul class="simple">
<li><p>Authorization can be done through RADIUS or local database</p>
<ul>
<li><p>Find attributes in certificate</p></li>
<li><p>Pass those attributes to auth server</p></li>
<li><p>Based on auth server, implement various configurations</p></li>
</ul>
</li>
</ul>
</section>
<section id="cisco-anyconnect">
<h2>Cisco AnyConnect<a class="headerlink" href="#cisco-anyconnect" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Client that is installed on user’s device that allows a remote access
VPN</p></li>
<li><p>Can connect to IOS, ASA, or FTD</p></li>
<li><p>Can have different profiles push out different parameters IP address,
ACLs, login times</p></li>
<li><p>IP address could be used on ACLs in other parts of the network</p></li>
<li><p>Split Tunneling</p>
<ul>
<li><p>Allows some traffic to flow through tunnel, while other traffic
goes through user’s LAN</p></li>
</ul>
</li>
<li><p>Encryption can be IPsec or TLS</p></li>
<li><p>IPv4 or IPv6</p></li>
<li><p>Allows multiple tunnel endpoints to be configured</p></li>
</ul>
<section id="additional-anyconnect-features">
<h3>Additional AnyConnect Features<a class="headerlink" href="#additional-anyconnect-features" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Integrate with other Cisco products</p></li>
<li><p>Provide visibility, compliance, malware protection, &amp; web inspection</p></li>
<li><p>Remote Access VPNs can also be achieved through Clientless VPN</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="1.-comparing-cryptography-components.html" class="btn btn-neutral float-left" title="Comparing Cryptography Components" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="3.-configuring-dmvpn.html" class="btn btn-neutral float-right" title="Configuring DMVPN" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Caleb Sargeant.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>