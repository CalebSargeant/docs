

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>General &mdash; Caleb Sargeant&#39;s Docs 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="IPTables" href="iptables.html" />
    <link rel="prev" title="Databases" href="databases.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Caleb Sargeant's Docs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Networking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../networking/cisco/index.html">Cisco</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/fortigate.html">FortiGate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/hp.html">HP Procurve</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/juniper.html">Juniper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/ubiquiti-unifi.html">Ubiquiti UniFi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/netdevops-toolchest.html">NetDevOps Tool Chest</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Computing</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ansible/index.html">Ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bamboo.html">Bamboo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud/index.html">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../containerisation/index.html">Containerisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jenkins/index.html">Jenkins</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Linux</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="databases.html">Databases</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">General</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#apt-yum-cheat-sheets">Apt &amp; Yum Cheat Sheets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rsync">Rsync</a></li>
<li class="toctree-l3"><a class="reference internal" href="#while-loop">While Loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#for-loop">For Loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fstab">Fstab</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#automounting">Automounting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#emergency-mode-bad-fstab">Emergency Mode Bad Fstab</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ssh-config">SSH Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#openssl">OpenSSL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#disk-usage">Disk Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#formatting-disk">Formatting Disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iso-to-disk">ISO to Disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grep">Grep</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tail">Tail</a></li>
<li class="toctree-l3"><a class="reference internal" href="#curl">Curl</a></li>
<li class="toctree-l3"><a class="reference internal" href="#find">Find</a></li>
<li class="toctree-l3"><a class="reference internal" href="#screen">Screen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-ssh-keys">Generating SSH Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sudo-without-password">Sudo without Password</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compression">Compression</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#zip">Zip</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bunzip">Bunzip</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tar">Tar</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pdf-to-csv">PDF to CSV</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-gui-on-centos">Installing GUI on CentOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-samba-users">List Samba Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="#open-webpage-on-mac">Open Webpage on Mac</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-fsck-manually">Running FSCK Manually</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xen">Xen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#manually-starting">Manually Starting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-xen">Install Xen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mount-cd-for-image-of-os">Mount CD for Image of OS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-vm">Install VM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#launch-vm-to-create-virtual-os">Launch VM to Create Virtual OS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#skel-terminal-colours">Skel Terminal Colours</a></li>
<li class="toctree-l3"><a class="reference internal" href="#move-a-file-starting-with-dash">Move a File Starting with Dash</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lftp">LFTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rename-a-file-to-a-filename-with-date">Rename a File to a Filename with Date</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checking-cpu-architecture">Checking CPU Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checking-uptime">Checking Uptime</a></li>
<li class="toctree-l3"><a class="reference internal" href="#crontab-different-editor">Crontab different editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tigervnc">TigerVNC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#old-school-lamp">Old School LAMP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installation">Installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#git-server">Git Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#on-the-server">On the Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-the-client-s-machine">On the Clientâ€™s Machine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#age-of-system">Age of System</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-all-services">List all Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="#temporary-failure-in-name-resolution">Temporary Failure in Name Resolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#change-hosname">Change Hosname</a></li>
<li class="toctree-l3"><a class="reference internal" href="#google-authenticator">Google Authenticator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#centos-7">CentOS 7</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cisco-anyconnect-connection">Cisco AnyConnect Connection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ldap-authentication">LDAP Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#public-key-authentication">Public Key Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sssd">SSSD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#gcloud">Gcloud</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Installation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iptables.html">IPTables</a></li>
<li class="toctree-l2"><a class="reference internal" href="kvm.html">KVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitoring.html">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="nagios.html">Nagios</a></li>
<li class="toctree-l2"><a class="reference internal" href="nagios.html#adding-linux-hosts">Adding Linux Hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="prometheus.html">Prometheus</a></li>
<li class="toctree-l2"><a class="reference internal" href="raspberry.html">Raspberry Pi</a></li>
<li class="toctree-l2"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="network-management/index.html">Network Management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../terraform/index.html">Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../microsoft/index.html">Microsoft</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../programming/bash.html">Bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programming/python/index.html">Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../other/api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../other/general/index.html">General</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../other/iperf.html">iPerf3</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Caleb Sargeant's Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Linux</a> &raquo;</li>
        
      <li>General</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/computing/linux/general.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="general">
<h1>General<a class="headerlink" href="#general" title="Permalink to this headline">Â¶</a></h1>
<p>General, random and useful Linux-related config and things.</p>
<p>A good site to browse random commands and things: <a class="reference external" href="https://www.commandlinefu.com/">https://www.commandlinefu.com/</a></p>
<div class="section" id="apt-yum-cheat-sheets">
<h2>Apt &amp; Yum Cheat Sheets<a class="headerlink" href="#apt-yum-cheat-sheets" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://blog.packagecloud.io">https://blog.packagecloud.io</a>:</p>
<p><a class="reference download internal" download="" href="../../_downloads/2c165d93f5ab036fed628ab3f4a3fd45/APT Cheat Sheet - Packagecloud Blog.pdf"><code class="xref download docutils literal notranslate"><span class="pre">Apt</span> <span class="pre">Cheat</span> <span class="pre">Sheet</span></code></a></p>
<p><a class="reference download internal" download="" href="../../_downloads/d80fb69a6e5996ddfb3a33516bd7aab8/Yum Cheat Sheet - Packagecloud Blog.pdf"><code class="xref download docutils literal notranslate"><span class="pre">Yum</span> <span class="pre">Cheat</span> <span class="pre">Sheet</span></code></a></p>
</div>
<div class="section" id="rsync">
<h2>Rsync<a class="headerlink" href="#rsync" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://ss64.com/bash/rsync.html">https://ss64.com/bash/rsync.html</a></p>
<p><a class="reference external" href="https://www.computerhope.com/unix/rsync.htm">https://www.computerhope.com/unix/rsync.htm</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># rsync without owner and group attributes</span>
rsync -avP --no-o --no-g /mnt/data/share/ /mnt/server3/Backups/

<span class="c1"># cronning rsync (https://unix.stackexchange.com/questions/392780/how-to-schedule-an-rsync-command)</span>
crontab -e
  <span class="m">0</span> <span class="m">19</span> * * * root rsync -a src dest

<span class="c1"># rsync showing progress (https://www.cyberciti.biz/faq/show-progress-during-file-transfer/)</span>
rsync -P src dest

<span class="c1"># rsync exclude stuff</span>
rsync -avP --exclude <span class="s1">&#39;file_or_dir&#39;</span> src/ dst/

<span class="c1"># rsync exclude from source file list</span>
cat excl-list.txt
  thisdir
  thatdir
  myfile.txt
rsync -av --exclude-from<span class="o">={</span>excl-list.txt<span class="o">}</span>

<span class="c1"># stop rsync from bandwidth vreet (https://www.cyberciti.biz/faq/how-to-set-keep-rsync-from-using-all-your-bandwidth-on-linux-unix/)</span>
rsync -avP --bwlimit<span class="o">=</span>KBps
rsync -avP --bwlimit<span class="o">=</span><span class="m">1024</span> src/ dst/

<span class="c1"># rsync specify multiple source dirs (https://unix.stackexchange.com/questions/368210/how-to-rsync-multiple-source-folders)</span>
rsync -avP /src/one /src/two /src/etcetra /dst
</pre></div>
</div>
</div>
<div class="section" id="while-loop">
<h2>While Loop<a class="headerlink" href="#while-loop" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://stackoverflow.com/questions/1289026/syntax-for-a-single-line-while-loop-in-bash">https://stackoverflow.com/questions/1289026/syntax-for-a-single-line-while-loop-in-bash</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> true<span class="p">;</span> <span class="k">do</span> foo<span class="p">;</span> sleep <span class="m">2</span><span class="p">;</span> <span class="k">done</span>
</pre></div>
</div>
</div>
<div class="section" id="for-loop">
<h2>For Loop<a class="headerlink" href="#for-loop" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://unix.stackexchange.com/questions/103920/parallelize-a-bash-for-loop/103922">https://unix.stackexchange.com/questions/103920/parallelize-a-bash-for-loop/103922</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Parellelize a for loop</span>
<span class="k">for</span> thing <span class="k">in</span> a b c d e f g<span class="p">;</span> <span class="k">do</span>
  task <span class="s2">&quot;</span><span class="nv">$thing</span><span class="s2">&quot;</span> <span class="p">&amp;</span>
<span class="k">done</span>
</pre></div>
</div>
</div>
<div class="section" id="fstab">
<h2>Fstab<a class="headerlink" href="#fstab" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="automounting">
<h3>Automounting<a class="headerlink" href="#automounting" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># List all UUIDs of drives</span>
blkid

<span class="c1"># List all disks</span>
fdisk -l

nano /etc/fstab
  <span class="nv">UUID</span><span class="o">=</span>05cdfcb3-90fc-40ec-8ff1-3324e3767b1d   /media/data     ext4    defaults,nofail <span class="m">0</span> <span class="m">0</span>
</pre></div>
</div>
</div>
<div class="section" id="emergency-mode-bad-fstab">
<h3>Emergency Mode Bad Fstab<a class="headerlink" href="#emergency-mode-bad-fstab" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Put SD card / HDD into another PC</span>
nano /boot/cmdline.txt
  <span class="nv">init</span><span class="o">=</span>/bin/sh

<span class="c1"># Put SD card / HDD back into original machine</span>

<span class="c1"># Mount FS (but not fstab)</span>
mount -o remount,rw / â€“target /

<span class="c1"># Modify fstab</span>
nano /etc/fstab
  <span class="c1"># modify what must be</span>

<span class="c1"># Put SD card / HDD into another PC</span>
nano /boot/cmdline.txt
  <span class="c1"># delete init=/bin/sh</span>

<span class="c1"># Put SD card / HDD back into original machine</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ssh-config">
<h2>SSH Config<a class="headerlink" href="#ssh-config" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://www.ssh.com/ssh/config/">https://www.ssh.com/ssh/config/</a></p>
<p><a class="reference external" href="https://www.openssh.com/legacy.html">https://www.openssh.com/legacy.html</a></p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat ~/.ssh/config
  Host server
   LocalForward <span class="m">2222</span> <span class="m">192</span>.168.99.99:22
   User ubuntu
   Hostname <span class="m">192</span>.168.100.1
   IdentityFile ~/.ssh/server
  Host router
   User cisco
   Hostname <span class="m">192</span>.168.1.1
   IdentityFile ~/.ssh/router
   Ciphers aes256-cbc
  Host switch
   User cisco
   Hostname <span class="m">192</span>.168.33.2
   Ciphers aes256-cbc
   KexAlgorithms +diffie-hellman-group1-sha1
</pre></div>
</div>
</div>
<div class="section" id="openssl">
<h2>OpenSSL<a class="headerlink" href="#openssl" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># https://stackoverflow.com/questions/5244129/use-rsa-private-key-to-generate-public-key</span>
<span class="c1"># Generate public key from private</span>
openssl rsa -in mykey.pem -pubout &gt; mykey.pub
</pre></div>
</div>
</div>
<div class="section" id="disk-usage">
<h2>Disk Usage<a class="headerlink" href="#disk-usage" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Human readable output</span>
du -h mydir/

<span class="c1"># Kilobytes</span>
du -k mydir/

<span class="c1"># Megabytes</span>
du -m mydir/

<span class="c1"># Which sub-dirs consume how much disk space:</span>
du -h --max-depth<span class="o">=</span><span class="m">1</span> mydir/ <span class="p">|</span> sort -hr

<span class="c1"># List all items including files and dirs</span>
du -ah mydir/

<span class="c1"># Multiple dirs</span>
du -h dir1/ dir2/

<span class="c1"># Summary</span>
du -sh

<span class="c1"># Grand total of dirs</span>
du -sch dir/

<span class="c1"># Exclude:</span>
du -sh --exclude<span class="o">=</span><span class="s1">&#39;*.docx&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="formatting-disk">
<h2>Formatting Disk<a class="headerlink" href="#formatting-disk" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># List disks</span>
df -h
fdisk -l

<span class="c1"># Unmount disk to format</span>
sudo umount /dev/sdc1

<span class="c1"># vFAT, NTFS, EXT4, etc.:</span>
sudo mkfs.vfat /dev/sdc1
sudo mkfs.ntfs /dev/sdc1
sudo mkfs.ext4 /dev/sdc1
</pre></div>
</div>
</div>
<div class="section" id="iso-to-disk">
<h2>ISO to Disk<a class="headerlink" href="#iso-to-disk" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dd <span class="k">if</span><span class="o">=</span>~/Downloads/ubuntu_something.iso <span class="nv">of</span><span class="o">=</span>/dev/diskN
</pre></div>
</div>
</div>
<div class="section" id="grep">
<h2>Grep<a class="headerlink" href="#grep" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># exclude nologin</span>
grep -wv nologin /etc/passwd

<span class="c1"># recursive lookups - https://stackoverflow.com/questions/1987926/how-do-i-grep-recursively</span>
grep -r <span class="s2">&quot;texthere&quot;</span> .
</pre></div>
</div>
</div>
<div class="section" id="tail">
<h2>Tail<a class="headerlink" href="#tail" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">## https://stackoverflow.com/questions/39615142/bash-get-last-line-from-a-variable</span>
<span class="c1"># Get last line</span>
tail -n1
</pre></div>
</div>
</div>
<div class="section" id="curl">
<h2>Curl<a class="headerlink" href="#curl" title="Permalink to this headline">Â¶</a></h2>
<p>Uploading files: <a class="reference external" href="https://ec.haxx.se/usingcurl/usingcurl-uploads">https://ec.haxx.se/usingcurl/usingcurl-uploads</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl https://EXAMPLE <span class="se">\</span>
  -F <span class="s1">&#39;one=sometext&#39;</span> <span class="se">\</span>
  -F <span class="s1">&#39;two=someothertext&#39;</span> <span class="se">\</span>
  -F <span class="s1">&#39;three=somemoretext&#39;</span> <span class="se">\</span>
  -F <span class="s1">&#39;doc=@/Users/caleb/Documents/Test.docx; type=application/vnd.openxmlformats-officedocument.wordprocessingml.document&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="find">
<h2>Find<a class="headerlink" href="#find" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://askubuntu.com/questions/123305/how-to-find-a-folder-on-my-server-with-a-certain-name">https://askubuntu.com/questions/123305/how-to-find-a-folder-on-my-server-with-a-certain-name</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>find ~ -name foldername -type d
</pre></div>
</div>
<p><a class="reference external" href="https://stackoverflow.com/questions/5905054/how-can-i-recursively-find-all-files-in-current-and-subfolders-based-on-wildcard">https://stackoverflow.com/questions/5905054/how-can-i-recursively-find-all-files-in-current-and-subfolders-based-on-wildcard</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>find . -name <span class="s2">&quot;foo*&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="screen">
<h2>Screen<a class="headerlink" href="#screen" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://linuxize.com/post/how-to-use-linux-screen/">https://linuxize.com/post/how-to-use-linux-screen/</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create screen called caleb</span>
screen -S caleb

<span class="c1"># Go into screen called caleb</span>
screen -r -d caleb
</pre></div>
</div>
</div>
<div class="section" id="generating-ssh-keys">
<h2>Generating SSH Keys<a class="headerlink" href="#generating-ssh-keys" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://askubuntu.com/questions/311558/ssh-permission-denied-publickey">https://askubuntu.com/questions/311558/ssh-permission-denied-publickey</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">### ON THE CLIENT</span>

<span class="c1"># Generate a public key on the client</span>
ssh-keygen -t rsa -b <span class="m">4096</span>

<span class="c1">### Output</span>
<span class="c1">#Generating public/private rsa key pair.</span>
<span class="c1">#Enter file in which to save the key (/home/ubuntu/.ssh/id_rsa):</span>
<span class="c1">#Enter passphrase (empty for no passphrase):</span>
<span class="c1">#Enter same passphrase again:</span>
<span class="c1">#Your identification has been saved in /home/ubuntu/.ssh/id_rsa.</span>
<span class="c1">#Your public key has been saved in /home/ubuntu/.ssh/id_rsa.pub.</span>
<span class="c1">#The key fingerprint is:</span>
<span class="c1">#SHA256:random</span>

<span class="c1"># Copy public key to server (you will be required to authenticate)</span>
ssh-copy-id ubuntu@10.0.2.12

<span class="c1">### Output</span>
<span class="c1"># /usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/home/ubuntu/.ssh/id_rsa.pub&quot;</span>
<span class="c1"># /usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span>
<span class="c1"># /usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed if you are prompted now it is to install the new keys</span>
<span class="c1"># ubuntu@10.0.2.12&#39;s password:</span>

<span class="c1"># Number of key(s) added: 1</span>

<span class="c1"># Now try logging into the machine, with:   &quot;ssh &#39;ubuntu@10.0.2.12&#39;&quot;</span>
<span class="c1"># and check to make sure that only the key(s) you wanted were added.</span>

<span class="c1"># You can add IdentitiesOnly yes to ensure ssh uses the IdentityFile and no other keyfiles during authentication, which can cause issues and is not a good practice.</span>
vim ~/.ssh/config
  Host SERVERNAME
  Hostname ip-or-domain-of-server
  User USERNAME
  PubKeyAuthentication yes
  IdentityFile ./path/to/key
</pre></div>
</div>
</div>
<div class="section" id="sudo-without-password">
<h2>Sudo without Password<a class="headerlink" href="#sudo-without-password" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># DO NOT MAKE A MISTAKE</span>
visudo
    %sudo   <span class="nv">ALL</span><span class="o">=(</span>ALL:ALL<span class="o">)</span> NOPASSWD:ALL
</pre></div>
</div>
</div>
<div class="section" id="compression">
<h2>Compression<a class="headerlink" href="#compression" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="zip">
<h3>Zip<a class="headerlink" href="#zip" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum -y install zip unzip
zip -9 -r &lt;zip file&gt; &lt;folder name&gt;
unzip file.zip
</pre></div>
</div>
</div>
<div class="section" id="bunzip">
<h3>Bunzip<a class="headerlink" href="#bunzip" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bunzip2 myfile.bz2
tar xjvf myfile.tar.bz2
</pre></div>
</div>
</div>
<div class="section" id="tar">
<h3>Tar<a class="headerlink" href="#tar" title="Permalink to this headline">Â¶</a></h3>
<p>A good source for <code class="docutils literal notranslate"><span class="pre">tar</span></code> commands <a class="reference external" href="https://www.freecodecamp.org/news/tar-in-linux-example-tar-gz-tar-file-and-tar-directory-and-tar-compress-commands/">https://www.freecodecamp.org/news/tar-in-linux-example-tar-gz-tar-file-and-tar-directory-and-tar-compress-commands/</a>.</p>
<p><strong>.tar</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar -cvf myarchive.tar mydirectory/
tar -xvf mystuff.tar
</pre></div>
</div>
<p><strong>.tar.gz</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar -czvf myarchive.tgz mydirectory/
tar -xzvf mystuff.tgz
</pre></div>
</div>
<p><strong>Tar to CIFS:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Backup the MySQL database</span>
mysqldump zabbix &gt; backup.sql

<span class="c1"># Install cifs-utils</span>
apt-get install cifs-utils

<span class="c1"># Create mountpoint dir</span>
mkdir /mnt/data

<span class="c1"># Mount the share</span>
mount -t cifs //10.10.10.10/share /mnt/data -o <span class="nv">user</span><span class="o">=</span>administrator

<span class="c1"># Archive Zabbix config &amp; DB</span>
tar cfzv backup.tar.gz /etc/zabbix/ backup.sql

<span class="c1"># Copy to share</span>
cp backup.tar.gz /mnt/data/
</pre></div>
</div>
</div>
</div>
<div class="section" id="pdf-to-csv">
<h2>PDF to CSV<a class="headerlink" href="#pdf-to-csv" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://github.com/tabulapdf/tabula-java/releases">https://github.com/tabulapdf/tabula-java/releases</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">TABULARNAME</span><span class="o">=</span>tabula-1.0.3-jar-with-dependencies.jar
<span class="nv">YEAR</span><span class="o">=</span><span class="m">2019</span>
<span class="nv">MONTH</span><span class="o">=</span><span class="m">08</span>
java -jar ./<span class="nv">$TABULARNAME</span> -b ./<span class="nv">$YEAR</span>/<span class="nv">$MONTH</span> -t -p all
</pre></div>
</div>
</div>
<div class="section" id="installing-gui-on-centos">
<h2>Installing GUI on CentOS<a class="headerlink" href="#installing-gui-on-centos" title="Permalink to this headline">Â¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">yum</span> <span class="pre">groupinstall</span> <span class="pre">&quot;Desktop&quot;</span> <span class="pre">&quot;Desktop</span> <span class="pre">Platform&quot;</span> <span class="pre">&quot;X</span> <span class="pre">Window</span> <span class="pre">System&quot;</span> <span class="pre">&quot;Fonts&quot;</span></code></p>
</div>
<div class="section" id="list-samba-users">
<h2>List Samba Users<a class="headerlink" href="#list-samba-users" title="Permalink to this headline">Â¶</a></h2>
<p>pbdedit -L</p>
</div>
<div class="section" id="open-webpage-on-mac">
<h2>Open Webpage on Mac<a class="headerlink" href="#open-webpage-on-mac" title="Permalink to this headline">Â¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">open</span> <span class="pre">-a</span> <span class="pre">&quot;Google</span> <span class="pre">Chrome&quot;</span> <span class="pre">index.html</span></code></p>
</div>
<div class="section" id="running-fsck-manually">
<h2>Running FSCK Manually<a class="headerlink" href="#running-fsck-manually" title="Permalink to this headline">Â¶</a></h2>
<p>You get a message: (or something similar)
/dev/mapper/vg_fedora1530-lv-home: UNEXPECTED INCONSISTENCY: RUN fsck MANUALLY (i.e., without -a or -p options)
Try the following:
1. Type the following commands:
umount /dev/sda*
fsck /dev/sda1 -f -y -a
(see <a class="reference external" href="http://www.computerhope.com/unix/fsck.htm">http://www.computerhope.com/unix/fsck.htm</a> for syntax of fsck)</p>
</div>
<div class="section" id="xen">
<h2>Xen<a class="headerlink" href="#xen" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="manually-starting">
<h3>Manually Starting<a class="headerlink" href="#manually-starting" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xm list
<span class="nb">cd</span> /etc/xen/
ls
xm create &lt;vm-name&gt;
ping &lt;vm-name&gt;
xm list
</pre></div>
</div>
</div>
<div class="section" id="install-xen">
<h3>Install Xen<a class="headerlink" href="#install-xen" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum install xen virt-manager kernel-xen
chkconfig xend on
reboot
</pre></div>
</div>
</div>
<div class="section" id="mount-cd-for-image-of-os">
<h3>Mount CD for Image of OS<a class="headerlink" href="#mount-cd-for-image-of-os" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir /media/cdrom
mount -t &lt;name_of_iso&gt; -o ro /dev/cdrom /media/cdrom
</pre></div>
</div>
</div>
<div class="section" id="install-vm">
<h3>Install VM<a class="headerlink" href="#install-vm" title="Permalink to this headline">Â¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">virt-install</span> <span class="pre">--prompt</span> <span class="pre">(yes</span> <span class="pre">centos</span> <span class="pre">512</span> <span class="pre">/home/vm/centos</span> <span class="pre">/media/cdrom)</span></code></p>
</div>
<div class="section" id="launch-vm-to-create-virtual-os">
<h3>Launch VM to Create Virtual OS<a class="headerlink" href="#launch-vm-to-create-virtual-os" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE to exit startx press ctrl,alt,bkspce</span>
startx
virt-manager
</pre></div>
</div>
</div>
</div>
<div class="section" id="skel-terminal-colours">
<h2>Skel Terminal Colours<a class="headerlink" href="#skel-terminal-colours" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mv .bashrc .bashrc.bak
cp /etc/skel/.bashrc .bashrc
nano .bashrc
<span class="c1"># uncomment this:</span>
<span class="nv">force_color_prompt</span><span class="o">=</span>yes
<span class="c1"># add this to the bottom of the file</span>
<span class="o">[[</span> -s <span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.rvm/scripts/rvm&quot;</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.rvm/scripts/rvm&quot;</span>
. .bashrc
</pre></div>
</div>
</div>
<div class="section" id="move-a-file-starting-with-dash">
<h2>Move a File Starting with Dash<a class="headerlink" href="#move-a-file-starting-with-dash" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># https://www.cyberciti.biz/faq/linuxunix-move-file-starting-with-a-dash/</span>
mv -- <span class="s1">&#39;--bar.txt&#39;</span> /path/to/dest
</pre></div>
</div>
</div>
<div class="section" id="lftp">
<h2>LFTP<a class="headerlink" href="#lftp" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://linuxconfig.org/lftp-tutorial-on-linux-with-examples">https://linuxconfig.org/lftp-tutorial-on-linux-with-examples</a></p>
</div>
<div class="section" id="rename-a-file-to-a-filename-with-date">
<h2>Rename a File to a Filename with Date<a class="headerlink" href="#rename-a-file-to-a-filename-with-date" title="Permalink to this headline">Â¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">&lt;name_of_file&gt;</span> <span class="pre">&lt;new_name_of_file&gt;.`date</span> <span class="pre">-I`</span></code></p>
</div>
<div class="section" id="checking-cpu-architecture">
<h2>Checking CPU Architecture<a class="headerlink" href="#checking-cpu-architecture" title="Permalink to this headline">Â¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">uname</span> <span class="pre">-i</span></code></p>
</div>
<div class="section" id="checking-uptime">
<h2>Checking Uptime<a class="headerlink" href="#checking-uptime" title="Permalink to this headline">Â¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">uptime</span></code></p>
</div>
<div class="section" id="crontab-different-editor">
<h2>Crontab different editor<a class="headerlink" href="#crontab-different-editor" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://www.linux.org/threads/set-your-default-editor-for-things-like-crontab-visudo-etc.5046/">https://www.linux.org/threads/set-your-default-editor-for-things-like-crontab-visudo-etc.5046/</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">EDITOR</span><span class="o">=</span><span class="s2">&quot;nano&quot;</span>
<span class="nb">export</span> <span class="nv">VISUAL</span><span class="o">=</span><span class="s2">&quot;nano&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="tigervnc">
<h2>TigerVNC<a class="headerlink" href="#tigervnc" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum install vnc vnc-server tigervnc-server xterm
yum groupinstall Desktop

useradd &lt;UserNameHere&gt;
passwd &lt;UserNameHere&gt;

vi /etc/sysconfig/vncservers
  <span class="nv">VNCSERVERS</span><span class="o">=</span><span class="s2">&quot;1:&lt;user1&gt; 2:&lt;user2&gt; 3:&lt;user3&gt;&quot;</span>
  VNCSERVERARGS<span class="o">[</span><span class="m">1</span><span class="o">]=</span><span class="s2">&quot;-geometry 640x480&quot;</span>
  VNCSERVERARGS<span class="o">[</span><span class="m">2</span><span class="o">]=</span><span class="s2">&quot;-geometry 640x480&quot;</span>
  VNCSERVERARGS<span class="o">[</span><span class="m">3</span><span class="o">]=</span><span class="s2">&quot;-geometry 800x600&quot;</span>

<span class="c1"># Remember to delete the nonsense after: &lt;resolution&gt;&quot;</span>

su - &lt;username&gt;
vncpasswd
service vncserver start

<span class="c1"># To connect to a Windows machine, install tiger-vnc on the Windows machine and enable Remote Desktop. Allow RDP 3389 through firewall.</span>
</pre></div>
</div>
</div>
<div class="section" id="old-school-lamp">
<h2>Old School LAMP<a class="headerlink" href="#old-school-lamp" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li><p>Apache (hosts the website)</p></li>
<li><p>MySQL (Database server)</p></li>
<li><p>PHP (hypertext processor)</p></li>
<li><p>Joomla (creates the website. Dependant on PHP and MYSQL)</p></li>
</ul>
</div>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">Â¶</a></h3>
<p><strong>My SQL Server 5.0 (server &amp; client)</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum install mysql mysql-server
chkconfig --levels <span class="m">235</span> mysqld on
/etc/init.d/mysqld start
mysql_secure_installation
</pre></div>
</div>
<p><strong>Apache 2</strong></p>
<p>(<a class="reference external" href="http://xxx.xxx.xxx">http://xxx.xxx.xxx</a>)
(Apacheâ€™s default document root is /var/www/html on CentOS, and the configuration file is /etc/httpd/conf/httpd.conf.
Additional configurations are stored in the /etc/httpd/conf.d/ directory)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum install httpd
chkconfig --levels <span class="m">235</span> httpd on
/etc/init.d/httpd start
</pre></div>
</div>
<p><strong>PHP5</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum install php
/etc/init.d/httpd restart
vi /var/www/html/info.php
</pre></div>
</div>
<p><strong>MySQL Support for PHP5</strong></p>
<p>(<a class="reference external" href="http://xxx.xxx.xxx.xxx/info.php">http://xxx.xxx.xxx.xxx/info.php</a>)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum search php
yum install php-mysql php-gd php-imap php-ldap php-mbstring php-odbc php-pear php-xml phpxmlrpc
yum install php-pecl-apc
/etc/init.d/httpd restart
</pre></div>
</div>
<p><strong>phpMyAdmin</strong></p>
<p>(<a class="reference external" href="http://xxx.xxx.xxx.xxx/phpmyadmin/">http://xxx.xxx.xxx.xxx/phpmyadmin/</a>)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rpm --import http://dag.wieers.com/rpm/packages/RPM-GPG-KEY.dag.txt

<span class="c1"># 64-bit:</span>
yum install http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm

<span class="c1"># 32-bit</span>
yum install http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.i686.rpm

yum install phpmyadmin
vi /etc/httpd/conf.d/phpmyadmin.conf
  <span class="c1">#</span>
  <span class="c1"># Web application to manage MySQL</span>
  <span class="c1">#</span>
  <span class="c1">#&lt;Directory &quot;/usr/share/phpmyadmin&quot;&gt;</span>
  <span class="c1"># Order Deny,Allow</span>
  <span class="c1"># Deny from all</span>
  <span class="c1"># Allow from 127.0.0.1</span>
  <span class="c1">#&lt;/Directory&gt;</span>
  Alias /phpmyadmin /usr/share/phpmyadmin
  Alias /phpMyAdmin /usr/share/phpmyadmin

vi /usr/share/phpmyadmin/config.inc.php
  <span class="o">[</span>...<span class="o">]</span>
  /* Authentication <span class="nb">type</span> */
  <span class="nv">$cfg</span><span class="o">[</span><span class="s1">&#39;Servers&#39;</span><span class="o">][</span><span class="nv">$i</span><span class="o">][</span><span class="s1">&#39;auth_type&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;http&#39;</span><span class="p">;</span>
  <span class="o">[</span>...<span class="o">]</span>

/etc/init.d/httpd restart
</pre></div>
</div>
<p><strong>Joomla!</strong></p>
<p>If you are installing LAMP without Joomla then skip all the commands that have anything to do with
Joomla.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /tmp
yum install wget
wget joomlacode.org/gf/download/frsrelease/17715/77262/Joomla_2.5.8-Stable-Full_Package.zip
mkdir /tmp/joomla
unzip Joomla_2.5.8-Stable-Full_Package.zip /tmp/joomla/
mv /tmp/joomla/* /var/www/html/
service mysqld start<span class="p">;</span> chkconfig mysqld on
/usr/bin/mysql_secure_installation
yum --enablerepo<span class="o">=</span>epel install phpmyadmin

vi /etc/httpd/conf.d/phpMyAdmin.conf
  Allow from <span class="m">127</span>.0.0.1 xxx.xxx.xxx.xxx/24

iptables -I INPUT -p tcp --dport http -j ACCEPT <span class="p">;</span> service iptables save <span class="p">;</span> service iptables restart

vi /etc/php.ini
  <span class="nv">output_buffering</span><span class="o">=</span>Off

touch /var/www/html/configuration.php
chmod <span class="m">666</span> /var/www/html/configuration.php
service httpd start<span class="p">;</span> chkconfig httpd on

mysql -u root -p
  create database &lt;db_name_here&gt;
  create user <span class="s1">&#39;root&#39;</span>@<span class="s1">&#39;localhost&#39;</span> identified by <span class="s1">&#39;&lt;password_here&gt;&#39;</span><span class="p">;</span>
  grant all privileges on &lt;db_name_here&gt;.* to root@localhost<span class="p">;</span>
  show grants <span class="k">for</span> <span class="s1">&#39;root&#39;</span>@<span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Open up a web browser and type in <a class="reference external" href="http://xxx.xxx.xxx">http://xxx.xxx.xxx</a>. Follow the wizard. REMEMBER TO COPY
CONFIGURATION TEXT TO /var/www/html/configuration.php.
<code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">-rf</span> <span class="pre">/var/www/html/installation/</span></code>
You can access the server by going to a browser and typing <a class="reference external" href="http://xxx.xxx.xxx/administrator">http://xxx.xxx.xxx/administrator</a>.</p>
</div>
</div>
<div class="section" id="git-server">
<h2>Git Server<a class="headerlink" href="#git-server" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="on-the-server">
<h3>On the Server<a class="headerlink" href="#on-the-server" title="Permalink to this headline">Â¶</a></h3>
<p><strong>Installing Git</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum install git-core
</pre></div>
</div>
<p><strong>Configuring the git group</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>groupadd git
</pre></div>
</div>
<p>For a new user:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>useradd -G git &lt;username&gt;
passwd &lt;username&gt;
id &lt;username&gt;
</pre></div>
</div>
<p>For an existing user:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usermod -a -G git &lt;username&gt;
id &lt;username&gt;
</pre></div>
</div>
<p><strong>Configuring the Git Server Repository</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir /path/to/gits
<span class="nb">cd</span> /path/to/gits
mkdir project.git
<span class="nb">cd</span> project.git
git init --bare --shared<span class="o">=</span>group
sudo chmod -R g+ws *
sudo chgrp -R git *
</pre></div>
</div>
<p><strong>Configuring the Git Hook for Web code</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir /var/www/html/project
<span class="nb">cd</span> /path/to/gits/project.git
vi /hooks/post-recieve
<span class="c1">#!/bin/sh</span>
<span class="nv">GIT_WORK_TREEE</span><span class="o">=</span>/var/www/html/project git checkout -f
chmod +x hooks/post-receive
chown -R git:git *
</pre></div>
</div>
</div>
<div class="section" id="on-the-client-s-machine">
<h3>On the Clientâ€™s Machine<a class="headerlink" href="#on-the-client-s-machine" title="Permalink to this headline">Â¶</a></h3>
<p>Download and install: <a class="reference external" href="https://git-scm.com/download/win">https://git-scm.com/download/win</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir /path/to/gits
<span class="nb">cd</span> /path/to/gits
mkdir project.git
<span class="nb">cd</span> project.git
git init
git remote add web ssh://&lt;HostnameOrIP&gt;/full/path/to/project.git
git add README
git commit -m <span class="s2">&quot;Initial Import&quot;</span>
git push web +master:refs/heads/master
</pre></div>
</div>
<p>Then open Firefox, go to &lt;HostnameOrIP&gt;/project
Then in future: git push web</p>
<p>Please note that you wont see any files on the server, because it is a bare repository and therefore the files are
protected. You can create a Git Hook to expose the bare repositoryâ€™s files in a different directory (useful for
web code).
Use git clone <a class="reference external" href="ssh:/">ssh:/</a>/&lt;hostname&gt;/path/to/gits to clone an existing server repository.</p>
</div>
</div>
<div class="section" id="age-of-system">
<h2>Age of System<a class="headerlink" href="#age-of-system" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://serverfault.com/questions/221377/how-to-determine-the-age-of-a-linux-system-since-installation">https://serverfault.com/questions/221377/how-to-determine-the-age-of-a-linux-system-since-installation</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ubuntu@server:~$ sudo tune2fs -l /dev/sda2 <span class="p">|</span> grep created
Filesystem created:       Mon Sep  <span class="m">7</span> <span class="m">06</span>:49:22 <span class="m">2020</span>
</pre></div>
</div>
</div>
<div class="section" id="list-all-services">
<h2>List all Services<a class="headerlink" href="#list-all-services" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://www.tecmint.com/list-all-running-services-under-systemd-in-linux/">https://www.tecmint.com/list-all-running-services-under-systemd-in-linux/</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl list-units --type<span class="o">=</span>service
systemctl --type<span class="o">=</span>service
</pre></div>
</div>
</div>
<div class="section" id="temporary-failure-in-name-resolution">
<h2>Temporary Failure in Name Resolution<a class="headerlink" href="#temporary-failure-in-name-resolution" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://stackoverflow.com/questions/53687051/ping-google-com-temporary-failure-in-name-resolution">https://stackoverflow.com/questions/53687051/ping-google-com-temporary-failure-in-name-resolution</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl disable systemd-resolved.service
sudo systemctl stop systemd-resolved.service
sudo rm /etc/resolv.conf
<span class="nb">echo</span> <span class="s2">&quot;nameserver 1.1.1.1&quot;</span> &gt; /etc/resolv.conf
<span class="nb">echo</span> <span class="s2">&quot;nameserver 1.0.0.3&quot;</span> &gt;&gt; /etc/resolv.conf
</pre></div>
</div>
</div>
<div class="section" id="change-hosname">
<h2>Change Hosname<a class="headerlink" href="#change-hosname" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://www.cyberciti.biz/faq/ubuntu-20-04-lts-change-hostname-permanently/">https://www.cyberciti.biz/faq/ubuntu-20-04-lts-change-hostname-permanently/</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo hostnamectl set-hostname SERVERNAME
nano /etc/hosts
</pre></div>
</div>
</div>
<div class="section" id="google-authenticator">
<h2>Google Authenticator<a class="headerlink" href="#google-authenticator" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="centos-7">
<h3>CentOS 7<a class="headerlink" href="#centos-7" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Update and Upgrade</span>
yum -y update <span class="o">&amp;&amp;</span> yum -y upgrade

<span class="c1"># Install FreeRADIUS</span>
yum install freeradius freeradius-utils

<span class="c1"># Install nano</span>
yum install nano

<span class="c1"># Make root the user</span>
nano /etc/raddb/radiusd.conf

<span class="nv">user</span> <span class="o">=</span> root
<span class="nv">group</span> <span class="o">=</span> root

<span class="c1"># Enable PAM</span>
nano /etc/raddb/sites-enabled/default

<span class="c1"># Pluggable Authentication Modules.</span>
pam

ln -s /etc/raddb/mods-available/pam /etc/raddb/mods-enabled/pam

<span class="c1"># Add the RADIUS clients</span>
nano /etc/raddb/clients.conf

client asa <span class="o">{</span>
<span class="nv">ipaddr</span> <span class="o">=</span> <span class="m">10</span>.145.16.3
<span class="nv">secret</span> <span class="o">=</span> supersecuresecret
<span class="nv">nas_type</span> <span class="o">=</span> cisco
<span class="o">}</span>

<span class="c1"># Change auth type</span>
nano /etc/raddb/users

DEFAULT <span class="nv">Group</span> <span class="o">==</span> <span class="s2">&quot;disabled&quot;</span>, Auth-Type :<span class="o">=</span> Reject

Reply-Message <span class="o">=</span> <span class="s2">&quot;Your account has been disabled.&quot;</span>

DEFAULT Auth-Type :<span class="o">=</span> PAM

<span class="c1"># Reload radiusd</span>
service radiusd restart

<span class="c1"># Test RADIUS, look for any errors</span>
radiusd -X

<span class="c1"># Test RADIUS without LDAP or Google Auth</span>
useradd raduser
passwd raduser

radtest raduser Password1 localhost <span class="m">0</span> testing123

<span class="c1"># Installing tools to add box to domain</span>
yum install sssd realmd adcli oddjob oddjob-mkhomedir sssd samba-common-tools

<span class="c1"># Make computer join the domain</span>
realm join corp.domain.com -U caleb.sargeant

<span class="c1"># Configure SSSD</span>
nano /etc/sssd/sssd.conf

<span class="nv">ad_domain</span> <span class="o">=</span> corp.domain.com
<span class="nv">krb5_realm</span> <span class="o">=</span> CORP.DOMAIN.COM
<span class="nv">realmd_tags</span> <span class="o">=</span> manages-system joined-with-samba
<span class="nv">cache_credentials</span> <span class="o">=</span> True
<span class="nv">id_provider</span> <span class="o">=</span> ad
<span class="nv">krb5_store_password_if_offline</span> <span class="o">=</span> True
<span class="nv">default_shell</span> <span class="o">=</span> /bin/bash
<span class="nv">ldap_id_mapping</span> <span class="o">=</span> True
<span class="nv">use_fully_qualified_names</span> <span class="o">=</span> False
<span class="nv">fallback_homedir</span> <span class="o">=</span> /home/%u
<span class="nv">access_provider</span> <span class="o">=</span> simple
<span class="nv">simple_allow_groups</span> <span class="o">=</span> test-group

<span class="c1"># Allow only users part of test-group to auth with radius server</span>
realm permit -g test-group

<span class="c1">### SSH into the box with caleb.sargeant@ct-googleauth - not needed anymore, become the user via su only</span>

<span class="c1"># Reload radiusd &amp; SSSD</span>
service radiusd restart
service sssd restart

<span class="c1"># Test RADIUS with LDAP, without Google Auth</span>
radiusd -X

radtest caleb.sargeant &lt;Password&gt; localhost <span class="m">0</span> testing123

<span class="c1"># Install stuff for Google Authenticator</span>
yum install pam-devel make gcc-c++ git wget

<span class="c1"># Installing Google Authenticator</span>
<span class="nb">cd</span> /tmp
wget https://dl.fedoraproject.org/pub/epel/7/x86_64/Packages/g/google-authenticator-1.04-1.el7.x86_64.rpm
rpm -i google-authenticator-1.04-1.el7.x86_64.rpm

<span class="c1"># Configuring Google Authenticator for a user</span>
su - caleb.sargeant
google-authenticator
<span class="c1">### say y for everything, backup the numbers!</span>

<span class="c1"># Add Google Authenticator to PAM</span>
nano /etc/pam.d/radiusd
<span class="c1">#%PAM-1.0</span>
auth requisite pam_google_authenticator.so forward_pass
auth required pam_sss.so use_first_pass
account required pam_nologin.so
account include password-auth
session include password-auth

<span class="c1"># Test RADIUS with LDAP and Google Auth</span>
radtest caleb.sargeant &lt;Password&gt;&lt;GoogleAuthCode&gt; localhost <span class="m">0</span> testing123

<span class="c1"># Disable SELinux</span>
nano /etc/selinux/config
<span class="nv">SELINUX</span><span class="o">=</span>disabled

<span class="c1"># Configuring firewall</span>
firewall-cmd --get-default-zone
firewall-cmd --zone<span class="o">=</span>public --list-all
firewall-cmd --get-services <span class="p">|</span> grep rad
firewall-cmd --permanent --zone<span class="o">=</span>public --add-service<span class="o">=</span>radius
firewall-cmd --reload
</pre></div>
</div>
</div>
<div class="section" id="cisco-anyconnect-connection">
<h3>Cisco AnyConnect Connection<a class="headerlink" href="#cisco-anyconnect-connection" title="Permalink to this headline">Â¶</a></h3>
<p>The below guide shows one how to connect to the VPN using oneâ€™s OTP. The connection is exactly the same as the previous VPN connection.</p>
<ul class="simple">
<li><p>To connect to the VPN using MFA, first connect to your region.</p></li>
</ul>
<img alt="../../_images/google-authenticator-1.png" src="../../_images/google-authenticator-1.png" />
<ul class="simple">
<li><p>Select the MFA Group.</p></li>
</ul>
<img alt="../../_images/google-authenticator-2.png" src="../../_images/google-authenticator-2.png" />
<ul class="simple">
<li><p>Enter your credentials. Once you have finished typing in your password, enter your TOTP. In this example, I will be using <em>Google Authenticator</em> on Android. The format is YOURPASSWORD-OTP (without the â€œ-â€œ).</p></li>
</ul>
<img alt="../../_images/google-authenticator-3.png" src="../../_images/google-authenticator-3.png" />
<img alt="../../_images/google-authenticator-4.png" src="../../_images/google-authenticator-4.png" />
<ul class="simple">
<li><p>You will be connected to the VPN as per normal.</p></li>
</ul>
<img alt="../../_images/google-authenticator-5.png" src="../../_images/google-authenticator-5.png" />
</div>
</div>
<div class="section" id="ldap-authentication">
<h2>LDAP Authentication<a class="headerlink" href="#ldap-authentication" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="public-key-authentication">
<h3>Public Key Authentication<a class="headerlink" href="#public-key-authentication" title="Permalink to this headline">Â¶</a></h3>
<p>First, on the host, reset the password of ubuntu &amp; root</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ubuntu@hostname:~$ sudo su -
root@hostname:~# passwd ubuntu
root@hostname:~# passwd root
</pre></div>
</div>
<p>Modify the sudoers file, so that we donâ€™t have type in the password to become root. DO NOT make a mistake here.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>visudo
  %sudo   <span class="nv">ALL</span><span class="o">=(</span>ALL:ALL<span class="o">)</span> NOPASSWD:ALL
</pre></div>
</div>
<p>On your laptop, copy the sshkey to the host</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>name.surname@MacBookPro:~$ sudo ssh-copy-id -i key.pub ubuntu@hostname
</pre></div>
</div>
<p>You can now log into the host using ubuntu &amp; the key.</p>
</div>
<div class="section" id="sssd">
<h3>SSSD<a class="headerlink" href="#sssd" title="Permalink to this headline">Â¶</a></h3>
<p>Modify the sudoers</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add Infrasturcture Team to Sudoers</span>
nano /etc/sudoers.d/ad-ldap
  %Infrastructure<span class="se">\ </span>Team <span class="nv">ALL</span><span class="o">=(</span>ALL:ALL<span class="o">)</span> NOPASSWD:ALL

<span class="c1"># Change permissions on sudoers file to Owner &amp; Group readable only</span>
chmod <span class="m">440</span> /etc/sudoers.d/ad-ldap
</pre></div>
</div>
<p>Install SSSD &amp; Related Tools</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt-get install samba-common sssd sssd-tools realmd adcli oddjob oddjob-mkhomedir libnss-sss libpam-sss adcli -y
</pre></div>
</div>
<p>Join the domain</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo realm join corp.example.com -U caleb.sargeant --install<span class="o">=</span>/
</pre></div>
</div>
<p>SSSD Configuration</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add or modify the below</span>
nano /etc/sssd/sssd.conf
  <span class="nv">use_fully_qualified_names</span> <span class="o">=</span> False
  <span class="nv">fallback_homedir</span> <span class="o">=</span> /home/%u
  <span class="nv">skel_dir</span> <span class="o">=</span> /etc/skel
  <span class="nv">homedir_umask</span> <span class="o">=</span> <span class="m">000</span>
  <span class="nv">override_homedir</span> <span class="o">=</span> /home/%u
  <span class="nv">simple_allow_groups</span> <span class="o">=</span> Infrastructure<span class="se">\ </span>Team
</pre></div>
</div>
<p>Restart SSSD</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>service sssd restart
</pre></div>
</div>
<p>You can now log in to the host using your domain credentials</p>
<p>To add Duo Authentication push notifications, see <a class="reference external" href="https://docs.calebsargeant.com/en/latest/computing/cloud/duo.html#unix-ssh">here</a>.</p>
</div>
</div>
<div class="section" id="gcloud">
<h2>Gcloud<a class="headerlink" href="#gcloud" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="id1">
<h3>Installation<a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h3>
<p><a class="reference external" href="https://stackoverflow.com/questions/31037279/gcloud-command-not-found-while-installing-google-cloud-sdk">https://stackoverflow.com/questions/31037279/gcloud-command-not-found-while-installing-google-cloud-sdk</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl https://sdk.cloud.google.com <span class="p">|</span> bash
<span class="c1"># The next line updates PATH for the Google Cloud SDK.</span>
<span class="nb">source</span> <span class="s1">&#39;[path-to-my-home]/google-cloud-sdk/path.bash.inc&#39;</span>
<span class="c1"># The next line enables bash completion for gcloud.</span>
<span class="nb">source</span> <span class="s1">&#39;[path-to-my-home]/google-cloud-sdk/completion.bash.inc&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="iptables.html" class="btn btn-neutral float-right" title="IPTables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="databases.html" class="btn btn-neutral float-left" title="Databases" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Caleb Sargeant.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>